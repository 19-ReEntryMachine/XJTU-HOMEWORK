clear;clc;
A1=zeros(9,39);
b1=[500*ones(3,1);250;375;500;150*ones(3,1)];
A2=zeros(9,39);
b3=2500*ones(39,1);
for i=1:3
    A1(i,3*i)=1;
    A1(i,3*i-2)=1;
    A1(i+3,2*i+9-1)=1;
    A1(i+3,2*i+9)=1;
    A1(i+6,30+3*i)=1;
    A1(i+6,30+3*i-2)=1;
    A1(i+6,30+3*i-1)=1;
    A2(3*i-2,3*i-2)=0.75;
    A2(3*i-2,2*i-1+9)=-1;
    A2(3*i-2,2*i-1+15)=0.5;
    A2(3*i-2,3*i-2+21)=-1;
    A2(3*i-2,3*i-2+30)=-1;
    A2(3*i-1,3*i-1)=0.8;
    A2(3*i-1,2*i-1+9)=1;
    A2(3*i-1,2*i+9)=-1;
    A2(3*i-1,2*i-1+15)=-1;
    A2(3*i-1,2*i+15)=0.5;
    A2(3*i-1,3*i-1+21)=-1;
    A2(3*i-1,3*i-1+30)=-1;
    A2(3*i,3*i)=0.9;
    A2(3*i,2*i+9)=1;
    A2(3*i,2*i+15)=-1;
    A2(3*i,3*i+21)=-1;
    A2(3*i,3*i+30)=-1;
    b3(3*i-1,1)=800;
    b3(2*i-1+9,1)=200;
end
b2=[-900;-25;50;-400;670;550;-450;125;575];
intcon=1:39;
c=[zeros(1,21),ones(1,9),zeros(1,9)];
x=intlinprog(c,intcon,A1,b1,A2.b2.zeros(39,1),b3);